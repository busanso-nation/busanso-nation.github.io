<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Busanso Nation</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<!-- DATA FILES -->
<script src="movies-data.js"></script>
<script src="series-data.js"></script>

<style>
body{
  margin:0;
  background:#0b0b0b;
  color:#fff;
  font-family:'Poppins',sans-serif;
}

/* HEADER */
.header{ padding:20px; text-align:center; }
.header img{ height:55px; }
.header h1{ margin:8px 0; }

/* BUTTONS */
.top-actions{
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  gap:14px;
  margin-bottom:22px;
}
.btn{
  padding:12px 24px;
  border-radius:999px;
  font-weight:700;
  text-decoration:none;
  font-size:14px;
  color:#fff;
}
.subscribe{ background:#e50914; }
.login{ background:#2563eb; }
.live{ background:#16a34a; }
.about{ background:#111; border:1px solid #333; }

/* SECTIONS */
.section{ padding:15px; }
.slider{
  display:flex;
  gap:14px;
  overflow-x:auto;
}
.slider::-webkit-scrollbar{ display:none; }

/* CARD */
.card{
  min-width:160px;
  text-align:center;
  position:relative;
}
.card img{
  width:100%;
  border-radius:10px;
}
.card-title{
  margin-top:6px;
  font-size:14px;
  font-weight:600;
}

/* WATCH BUTTON */
.watch-btn{
  margin-top:6px;
  width:100%;
  padding:8px;
  border:none;
  border-radius:8px;
  font-weight:bold;
  background:#e50914;
  color:#fff;
  cursor:pointer;
}
.card.premium .watch-btn{
  cursor:default;
}

/* BADGES */
.badge{
  position:absolute;
  top:8px;
  left:8px;
  font-size:11px;
  padding:3px 8px;
  border-radius:6px;
  background:#22c55e;
}
.badge.premium{ background:#e50914; }
</style>
</head>

<body>

<script>
/* ===== AUTO REDIRECT IF PIN VALID ===== */
const pin = localStorage.getItem("activePIN");
const exp = Number(localStorage.getItem("pinExpiry"));

if(pin && exp && Date.now() < exp){
  location.replace("watch.html");
}
</script>

<div class="header">
  <img src="https://i.ibb.co/hxgrLF35/BUSANSO-New.png">
  <h1>Busanso Nation</h1>
  <small>Movies & Series without stress</small>
</div>

<div class="top-actions">
  <a href="packages.html" class="btn subscribe">‚≠ê Subscribe</a>
  <a href="login.html" class="btn login">üîê Login</a>
  <a href="live.html" class="btn live">üì∫ Live TV</a>
  <a href="about.html" class="btn about">‚Ñπ About</a>
</div>

<div class="section">
  <h3>Latest Movies</h3>
  <div class="slider" id="moviesBox"></div>
</div>

<div class="section">
  <h3>Latest Series</h3>
  <div class="slider" id="seriesBox"></div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {

  if(typeof MOVIES === "undefined" || typeof SERIES === "undefined"){
    console.error("Data files not loaded");
    return;
  }

  function createCard(item, type){
    const isPremium = item.type === "premium";

    const card = document.createElement("div");
    card.className = "card" + (isPremium ? " premium" : "");

    card.innerHTML = `
      <div style="position:relative">
        <img src="${item.poster}">
        <span class="badge ${isPremium ? 'premium' : ''}">
          ${isPremium ? 'PREMIUM' : 'FREE'}
        </span>
      </div>
      <div class="card-title">${item.title}</div>
      <button class="watch-btn">${isPremium ? "Pay to Watch" : "Watch"}</button>
    `;

    if(!isPremium){
      card.querySelector(".watch-btn").onclick = () => {
        location.href =
          type === "movie"
            ? \`movie.html?id=\${item.id}\`
            : \`serie.html?id=\${item.id}\`;
      };
    }

    return card;
  }

  const moviesBox = document.getElementById("moviesBox");
  MOVIES.forEach(m => moviesBox.appendChild(createCard(m,"movie")));

  const seriesBox = document.getElementById("seriesBox");
  SERIES.forEach(s => seriesBox.appendChild(createCard(s,"series")));

});
</script>

</body>
</html>
