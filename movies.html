<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BUSANSO â€“ Movies</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- LOAD MOVIE DATA -->
<script src="movies-data.js"></script>

<style>
body{
  margin:0;
  background:#0f0f0f;
  color:#fff;
  font-family:Arial, sans-serif;
}

/* ===== HEADER ===== */
header{
  padding:16px;
  font-size:24px;
  font-weight:bold;
}

/* ===== MOVIES GRID ===== */
.movies{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:14px;
  padding:14px;
}

@media(min-width:600px){
  .movies{
    grid-template-columns:repeat(4,1fr);
  }
}

/* ===== CARD ===== */
.movie{
  background:#181818;
  border-radius:12px;
  overflow:hidden;
  opacity:0;
  transform:translateY(15px);
  animation:fadeUp .4s ease forwards;
}

@keyframes fadeUp{
  to{
    opacity:1;
    transform:none;
  }
}

.movie img{
  width:100%;
  display:block;
}

.movie-info{
  padding:10px;
}

.movie-title{
  font-size:14px;
  font-weight:bold;
  margin-bottom:4px;
}

.movie-meta{
  font-size:12px;
  color:#aaa;
  margin-bottom:8px;
}

/* ===== WATCH BUTTON ===== */
.watch{
  width:100%;
  padding:8px;
  border:none;
  border-radius:8px;
  background:#e50914;
  color:#fff;
  font-weight:bold;
  cursor:pointer;
}
.watch:hover{opacity:.9}
</style>
</head>

<body>

<!-- ===== PIN CHECK ===== -->
<script>
if(!localStorage.getItem("activePIN")){
  location.replace("login.html");
}
</script>

<header>ðŸŽ¬ BUSANSO MOVIES</header>

<div class="movies" id="movies"></div>

<script>
const box = document.getElementById("movies");

/* Safety check */
if(typeof MOVIES === "undefined"){
  alert("movies-data.js not loaded");
}

/* BUILD CARDS */
MOVIES.forEach((m, index)=>{
  const card = document.createElement("div");
  card.className = "movie";
  card.style.animationDelay = (index * 0.05) + "s";

  card.innerHTML = `
    <img src="${m.poster}" loading="lazy">
    <div class="movie-info">
      <div class="movie-title">${m.title}</div>
      <div class="movie-meta">${m.country} â€¢ ${m.duration}</div>
      <button class="watch">Watch</button>
    </div>
  `;

  card.querySelector(".watch").onclick = ()=>{
    location.href =
      `movie.html?title=${encodeURIComponent(m.title)}
      &video=${encodeURIComponent(m.video)}
      &year=${m.year}
      &country=${m.country}
      &duration=${m.duration}
      &synopsis=${encodeURIComponent(m.synopsis || "")}`;
  };

  box.appendChild(card);
});
</script>

</body>
</html>
