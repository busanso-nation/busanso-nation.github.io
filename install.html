<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Install BUSANSO NATION App</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- PWA -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#000000">
<link rel="apple-touch-icon" href="icons/icon-192.png">

<style>
body{
  margin:0;
  height:100vh;
  font-family:'Segoe UI',sans-serif;
  background:radial-gradient(circle at top,#102a1d,#000);
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
}

.card{
  text-align:center;
  max-width:360px;
  padding:30px;
}

.logo{
  font-size:2.4rem;
  font-weight:800;
  letter-spacing:3px;
}
.nation{color:#e50914}

.tagline{
  margin:12px 0 20px;
  color:#f1c40f;
}

button{
  padding:14px 26px;
  font-size:16px;
  border:none;
  cursor:pointer;
  background:#e50914;
  color:#fff;
  border-radius:6px;
}

button:hover{opacity:.9}

.ios{
  margin-top:20px;
  font-size:.95rem;
  display:none;
}
</style>
</head>

<body>

<div class="card">
  <div class="logo">BUSANSO <span class="nation">NATION</span></div>
  <div class="tagline">Install the official app</div>

  <button id="installBtn" style="display:none;">Install App</button>

  <div class="ios" id="iosHint">
    On iPhone:<br>
    Tap <strong>Share → Add to Home Screen</strong>
  </div>
</div>

<script>
const installBtn = document.getElementById("installBtn");
let deferredPrompt = null;

/* Redirect installed users */
if (
  window.matchMedia('(display-mode: standalone)').matches ||
  window.navigator.standalone === true
) {
  location.replace("home.html");
}

/* Register service worker */
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("service-worker.js");
}

/* Initial button state */
installBtn.style.display = "inline-block";
installBtn.textContent = "Checking availability…";
installBtn.disabled = true;
installBtn.style.opacity = "0.7";

/* Chrome install availability */
window.addEventListener("beforeinstallprompt", (e) => {
  e.preventDefault();
  deferredPrompt = e;

  installBtn.textContent = "Install BUSANSO NATION";
  installBtn.disabled = false;
  installBtn.style.opacity = "1";
});

/* Install click */
installBtn.addEventListener("click", async () => {
  if (!deferredPrompt) return;

  installBtn.disabled = true;
  installBtn.textContent = "Installing…";

  deferredPrompt.prompt();
  await deferredPrompt.userChoice;
  deferredPrompt = null;
});

/* After install */
window.addEventListener("appinstalled", () => {
  localStorage.setItem("installed","yes");
  location.replace("home.html");
});
</script>

</body>
</html>
